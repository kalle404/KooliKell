(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],u=0,f=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},i=[];function r(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"a16b85c7"}[t]+".js"}function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=s[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=s[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,a[1](l)}s[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0baa":function(t,e,a){"use strict";var n=a("8fd9"),s=a.n(n);s.a},"0cae":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-tasks"},[a("v-icon",{attrs:{size:"100",color:"primary"}},[t._v(" mdi-check ")]),a("div",{staticClass:"text-h5 primary--text"},[t._v("Tühi päev")])],1)},s=[],i=(a("c5ff"),a("2877")),r=a("6544"),o=a.n(r),c=a("132d"),l={},u=Object(i["a"])(l,n,s,!1,null,null,null);e["default"]=u.exports;o()(u,{VIcon:c["a"]})},"436b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"pa-4"},[a("v-row",[a("v-date-picker",{attrs:{"first-day-of-week":"1",locale:"ET","event-color":"primary","no-title":"",mode:"date",events:t.datesWithTasks},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}}),a("v-btn",{staticClass:"mx-2",attrs:{fab:"",large:"",color:"blue lighten-1"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.overlay=!1},click:function(e){e.stopPropagation(),t.overlay=!t.overlay,t.calendarButtonClicked()}}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-calendar-plus ")])],1),a("div",{staticClass:"clockPosition"},[a("v-overlay",{attrs:{absolute:!0,value:t.overlay}},[t.showClock?a("v-time-picker",{staticClass:"mt-4",attrs:{scrollable:"","header-color":"primary",format:"24hr"},model:{value:t.timeInput,callback:function(e){t.timeInput=e},expression:"timeInput"}},[a("v-spacer"),a("v-btn",{attrs:{large:"",elevation:"2",text:"",color:"primary"},on:{click:function(e){return t.cancelClicked()}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{large:"",elevation:"2",text:"",color:"primary",disabled:!t.timeInput},on:{click:function(e){return t.clockOkayClicked()}}},[t._v(" Ok ")])],1):t._e()],1)],1)],1)],1),a("div",{staticClass:"pa-4"},[t.dateTaskList.length?a("v-list",{staticClass:"pt-0",attrs:{flat:""}},t._l(t.dateTaskList,(function(t){return a("task",{key:t.id,attrs:{task:t}})})),1):a("no-tasks")],1)])},s=[],i=(a("a630"),a("fb6a"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("bf19"),a("b85c")),r={props:["task"],data:function(){return{arrayEvents:null,selectedDate:null,showClock:!1,timeInput:null,overlay:!1}},computed:{tasks:{get:function(){return this.$store.getters.tasksFiltered},set:function(t){this.$store.dispatch("setTasks",t)}},datesWithTasks:{get:function(){var t,e,a=this.$store.getters.tasksFiltered,n=new Set,s=Object(i["a"])(a);try{for(s.s();!(e=s.n()).done;)t=e.value,n.add(t.taskDate)}catch(r){s.e(r)}finally{s.f()}return Array.from(n)}},dateTaskList:{get:function(){var t,e,a=this.$store.getters.tasksFiltered,n=[],s=Object(i["a"])(a);try{for(s.s();!(e=s.n()).done;)t=e.value,t.taskDate==this.selectedDate&&n.push(t)}catch(c){s.e(c)}finally{s.f()}var r,o=Object(i["a"])(a);try{for(o.s();!(r=o.n()).done;)t=r.value,t.timeStamp=Date.parse(t.taskDate+" "+t.taskTime+":00")}catch(c){o.e(c)}finally{o.f()}return n.sort((function(t,e){return t.timeStamp-e.timeStamp})),n}}},mounted:function(){this.checkSelectedDate()},methods:{checkSelectedDate:function(){null==this.selectedDate&&(this.selectedDate=(new Date).toJSON().slice(0,10))},calendarButtonClicked:function(){this.showClock=!this.showClock},cancelClicked:function(){this.showClock=!1,this.timeInput=null,this.overlay=!1},clockOkayClicked:function(){this.showClock=!1,this.addNewTask(),this.overlay=!1},addNewTask:function(){var t={title:"genericTaskTitle"};t["dateValue"]=this.selectedDate,t["timeValue"]=this.timeInput,this.$store.dispatch("addTask",t),this.dateInput=null,this.timeInput=null}},components:{task:a("58a7").default,"no-tasks":a("0cae").default}},o=r,c=a("2877"),l=a("6544"),u=a.n(l),d=a("8336"),f=a("2e4b"),k=a("132d"),m=a("8860"),p=a("a797"),h=a("0fd9"),v=a("2fa4"),b=a("c964"),T=Object(c["a"])(o,n,s,!1,null,null,null);e["default"]=T.exports;u()(T,{VBtn:d["a"],VDatePicker:f["a"],VIcon:k["a"],VList:m["a"],VOverlay:p["a"],VRow:h["a"],VSpacer:v["a"],VTimePicker:b["a"]})},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{"mobile-breakpoint":768,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:"",nav:""}},t._l(t.items,(function(e){return a("v-list-item",{key:e.title,attrs:{to:e.to,link:""}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1)],1),a("v-app-bar",{attrs:{app:"",color:"primary",dark:"",src:"mountains.jpg",prominent:"",height:"/"===t.$route.path?"238":"170"},scopedSlots:t._u([{key:"img",fn:function(e){var n=e.props;return[a("v-img",t._b({attrs:{gradient:"to top right, rgba(19,84,122,.9), rgba(128,208,199,.9)"}},"v-img",n,!1))]}}])},[a("v-container",{staticClass:"pa-0"},[a("v-row",[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("v-spacer"),a("bell")],1),a("v-row",[a("v-toolbar-title",{staticClass:"font-weight-medium ml-4"},[t._v(" "+t._s(t.$store.state.appTitle)+" ")])],1),a("v-row",[a("live-date-time")],1)],1)],1),a("v-main",[a("router-view"),a("snackbar")],1)],1)},i=[],r={data:function(){return{drawer:!1,items:[{title:"Kalender",icon:"mdi-format-list-checks",to:"/"},{title:"Rakendusest",icon:"mdi-help-box",to:"/about"}]}},mounted:function(){this.$store.dispatch("getTasks")},components:{bell:a("60d1").default,"live-date-time":a("c380").default,snackbar:a("9169").default}},o=r,c=(a("cf25"),a("2877")),l=a("6544"),u=a.n(l),d=a("7496"),f=a("40dc"),k=a("5bc1"),m=a("a523"),p=a("132d"),h=a("adda"),v=a("8860"),b=a("da13"),T=a("5d23"),g=a("34c3"),y=a("f6c4"),w=a("f774"),D=a("0fd9"),_=a("2fa4"),C=a("2a7f"),x=Object(c["a"])(o,s,i,!1,null,null,null),V=x.exports;u()(x,{VApp:d["a"],VAppBar:f["a"],VAppBarNavIcon:k["a"],VContainer:m["a"],VIcon:p["a"],VImg:h["a"],VList:v["a"],VListItem:b["a"],VListItemContent:T["a"],VListItemIcon:g["a"],VListItemTitle:T["b"],VMain:y["a"],VNavigationDrawer:w["a"],VRow:D["a"],VSpacer:_["a"],VToolbarTitle:C["a"]});a("99af"),a("b0c0"),a("d3b7");var O=a("8c4f"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("list-tasks"),t.$store.state.sorting?a("button-done-sorting"):t._e()],1)},j=[],$={name:"Home",components:{"list-tasks":a("436b").default}},I=$,E=Object(c["a"])(I,S,j,!1,null,null,null),L=E.exports,P=a("3384"),R=a.n(P);n["a"].use(O["a"]);var F=[{path:"/",name:"Kalender",component:L},{path:"/about",name:"Rakendusest",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],M=new O["a"]({routes:F});M.beforeEach((function(t,e,a){document.title="".concat("KooliKell"," - ").concat(t.name),a()})),M.afterEach((function(t,e){R()(0,{duration:0})}));var N=M,H=(a("4de4"),a("caad"),a("ac1f"),a("2532"),a("841c"),a("2f62")),B=a("af0d"),K=new B["a"]("db");K.config.debug=!1,n["a"].use(H["a"]);var A=new H["a"].Store({state:{appTitle:"KooliKell",search:null,tasks:[],snackbar:{show:!1,text:""},sorting:!1},mutations:{setSearch:function(t,e){t.search=e},addTask:function(t,e){t.tasks.push(e)},doneTask:function(t,e){var a=t.tasks.filter((function(t){return t.id===e}))[0];a.done=!a.done},deleteTask:function(t,e){t.tasks=t.tasks.filter((function(t){return t.id!==e}))},updateTaskTitle:function(t,e){var a=t.tasks.filter((function(t){return t.id===e.id}))[0];a.title=e.title},updateTaskDueDate:function(t,e){var a=t.tasks.filter((function(t){return t.id===e.id}))[0];a.dueDate=e.dueDate},setTasks:function(t,e){t.tasks=e},showSnackbar:function(t,e){var a=0;t.snackbar.show&&(t.snackbar.show=!1,a=300),setTimeout((function(){t.snackbar.show=!0,t.snackbar.text=e}),a)},hideSnackbar:function(t){t.snackbar.show=!1},toggleSorting:function(t){t.sorting=!t.sorting}},actions:{addTask:function(t,e){var a=t.commit,n={id:Date.now(),title:e.title,done:!1,dueDate:null,taskDate:e.dateValue,taskTime:e.timeValue};K.collection("tasks").add(n).then((function(){a("addTask",n),a("showSnackbar","Lisatud!")}))},doneTask:function(t,e){var a=t.state,n=t.commit,s=a.tasks.filter((function(t){return t.id===e}))[0];K.collection("tasks").doc({id:e}).update({done:!s.done}).then((function(){n("doneTask",e)}))},deleteTask:function(t,e){var a=t.commit;K.collection("tasks").doc({id:e}).delete().then((function(){a("deleteTask",e),a("showSnackbar","Eemaldatud!")}))},updateTaskTitle:function(t,e){var a=t.commit;K.collection("tasks").doc({id:e.id}).update({title:e.title}).then((function(){a("updateTaskTitle",e),a("showSnackbar","Task updated!")}))},updateTaskDueDate:function(t,e){var a=t.commit;K.collection("tasks").doc({id:e.id}).update({dueDate:e.dueDate}).then((function(){a("updateTaskDueDate",e),a("showSnackbar","Due Date Updated!")}))},setTasks:function(t,e){var a=t.commit;K.collection("tasks").set(e),a("setTasks",e)},getTasks:function(t){var e=t.commit;K.collection("tasks").get().then((function(t){e("setTasks",t)}))}},getters:{tasksFiltered:function(t){return t.search?t.tasks.filter((function(e){return e.title.toLowerCase().includes(t.search.toLowerCase())})):t.tasks}}}),J=a("f309");n["a"].use(J["a"]);var U=new J["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:N,store:A,vuetify:U,render:function(t){return t(V)}}).$mount("#app")},"58a7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-list-item",{staticClass:"pb-1",class:t.passedClass,scopedSlots:t._u([{key:"default",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v(" Kuupäev "+t._s(t.task.taskDate)+" kell "+t._s(t.task.taskTime)+" ")])],1),a("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:"blue lighten-2"},on:{click:function(e){return e.stopPropagation(),t.deleteTask(t.task.id)}}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-delete ")])],1)]},proxy:!0}])}),a("v-divider")],1)},s=[],i={data:function(){return{passedClass:null}},props:["task"],methods:{deleteTask:function(t){this.$store.dispatch("deleteTask",t)},checkClassType:function(){this.task.timeStamp<Date.now()&&(this.passedClass="grey lighten-2"),setTimeout(this.checkClassType,1e3)}},mounted:function(){this.checkClassType()}},r=i,o=a("2877"),c=a("6544"),l=a.n(c),u=a("8336"),d=a("ce7e"),f=a("132d"),k=a("da13"),m=a("5d23"),p=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=p.exports;l()(p,{VBtn:u["a"],VDivider:d["a"],VIcon:f["a"],VListItem:k["a"],VListItemContent:m["a"],VListItemTitle:m["b"]})},"60d1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pa-2"},[a("v-btn",{staticClass:"mx-2",attrs:{fab:"",small:"",color:t.bellColor},on:{click:function(e){return e.stopPropagation(),t.bellRing()}}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-bell ")])],1)],1)},s=[],i={data:function(){return{soundFile:"flute.wav",bellColor:"pink"}},components:{},methods:{bellRing:function(){var t=this;console.log("bellring activated !!!"),this.bellColor="gray";var e=new Audio(this.soundFile);e.play(),setTimeout((function(){t.bellColor="pink"}),3e3)}}},r=i,o=a("2877"),c=a("6544"),l=a.n(c),u=a("8336"),d=a("132d"),f=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=f.exports;l()(f,{VBtn:u["a"],VIcon:d["a"]})},"8fd9":function(t,e,a){},9169:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){return t.$store.commit("hideSnackbar")}}},"v-btn",n,!1),[t._v(" OK ")])]}}]),model:{value:t.$store.state.snackbar.show,callback:function(e){t.$set(t.$store.state.snackbar,"show",e)},expression:"$store.state.snackbar.show"}},[t._v(" "+t._s(t.$store.state.snackbar.text)+" ")])},s=[],i={},r=i,o=(a("0baa"),a("2877")),c=a("6544"),l=a.n(c),u=a("8336"),d=a("2db4"),f=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=f.exports;l()(f,{VBtn:u["a"],VSnackbar:d["a"]})},af4a:function(t,e,a){},c380:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"ml-4"},[a("v-row",{staticClass:"display-1"},[t._v(" "+t._s(t.currentTime)+" ")]),a("v-row",{staticClass:"subtitle-1"},[a("p",[t._v("Järgmine: "+t._s(t.nextTaskDate+" "+t.nextTaskTime))])])],1)},s=[],i=a("b85c"),r=a("b166"),o={props:["task"],data:function(){return{soundFile:"flute.wav",currentTime:"",currentTimestamp:"",futureTasks:[],nextTaskDate:"",nextTaskTime:"",lastTriggerTime:null,hasRinged:!1}},methods:{getDate:function(){this.currentTime=Object(r["a"])(new Date,"HH:mm:ss"),setTimeout(this.getDate,1e3)},getTimestamp:function(){this.currentTimestamp=Date.now(),setTimeout(this.getTimestamp,1e3)},memoryCleanUp:function(){var t,e,a=this.$store.getters.tasksFiltered,n=Object(i["a"])(a);try{for(n.s();!(e=n.n()).done;)t=e.value,t.timeStamp<Date.now()-1296e6&&this.$store.dispatch("deleteTask",t.id)}catch(s){n.e(s)}finally{n.f()}setTimeout(this.memoryCleanUp,36e4)},getFutureTasks:function(){var t,e=this.$store.getters.tasksFiltered;this.futureTasks=[];var a,n=Object(i["a"])(e);try{for(n.s();!(a=n.n()).done;)t=a.value,t.timeStamp>Date.now()&&this.futureTasks.push(t)}catch(s){n.e(s)}finally{n.f()}this.futureTasks.sort((function(t,e){return t.timeStamp-e.timeStamp})),setTimeout(this.getFutureTasks,12e3)},getNextTaskDate:function(){this.futureTasks.length>0&&(this.futureTasks[0].taskDate==Object(r["a"])(new Date,"yyyy-MM-dd")?this.nextTaskDate="Täna kell ":this.nextTaskDate=this.futureTasks[0].taskDate),setTimeout(this.getNextTaskDate,12e3)},getNextTaskTime:function(){this.futureTasks.length>0&&(this.nextTaskTime=this.futureTasks[0].taskTime),setTimeout(this.getNextTaskTime,12e3)},bellRing:function(){var t=new Audio(this.soundFile);this.futureTasks.length>0&&this.futureTasks[0].taskDate==Object(r["a"])(new Date,"yyyy-MM-dd")&&(this.lastTriggerTime!=Object(r["a"])(new Date,"HH:mm")&&(this.hasRinged=!1),this.futureTasks[0].taskTime!=Object(r["a"])(new Date,"HH:mm")||this.hasRinged||(this.lastTriggerTime=this.futureTasks[0].taskTime,console.log("ringed at "+Object(r["a"])(new Date,"yyyy-MM-dd HH:mm:ss")),t.play(),this.hasRinged=!0)),setTimeout(this.bellRing,3e3)}},computed:{},mounted:function(){this.getDate(),this.getTimestamp(),this.getFutureTasks(),this.getNextTaskDate(),this.getNextTaskTime(),this.bellRing(),this.memoryCleanUp()}},c=o,l=a("2877"),u=a("6544"),d=a.n(u),f=a("a523"),k=a("0fd9"),m=Object(l["a"])(c,n,s,!1,null,null,null);e["default"]=m.exports;d()(m,{VContainer:f["a"],VRow:k["a"]})},c5ff:function(t,e,a){"use strict";var n=a("af4a"),s=a.n(n);s.a},cf25:function(t,e,a){"use strict";var n=a("fea6"),s=a.n(n);s.a},fea6:function(t,e,a){}});
//# sourceMappingURL=app.7f567fd5.js.map